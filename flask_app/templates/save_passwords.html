<!-- Store this code in 'register.html' file inside the 'templates' folder -->

<html>

<head>
    <meta charset="UTF-8">
    <title> Save Credentials </title>
    <!-- <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">			 -->
</head>

<body></br></br></br></br></br>
    <div align="center">
        <div align="center" class="border">
            <div class="header">
                <h1 class="word">Save Credentials</h1>
            </div></br></br></br>
            {% if flag %}
            <div> Entries cannot be empty</div>
            {% endif %}
            <h2 class="word">
                <form id="myForm" method="POST" action="{{ url_for('save_creds') }}">
                    <input id="url" name="webpage_url" type="text" placeholder="Enter Your website url"
                        class="textbox" /></br></br>
                    <input id="username" name="username" type="text" placeholder="Enter Your Username"
                        class="textbox" /></br></br>
                    <input id="password" name="password" type="password" placeholder="Enter Your Password"
                        class="textbox" />
                    <button id="redirect-button">generate password</button> </br></br>
                    <input id="email" name="email" type="text" placeholder="Enter Your Email ID"
                        class="textbox" /></br></br>
                    <input type="submit" class="btn" value="Save"></br>
                </form>
            </h2>
        </div>
    </div>
    <script>
        // Get the form element
        // const form = document.getElementById('myForm');

        // // Attach a submit event listener to the form
        // form.addEventListener('submit', (event) => {
        //     event.preventDefault(); // Prevent the default form submission behavior

        //     // Serialize the form data into a JSON string
        //     const formData = new FormData(form);
        //     const jsonData = JSON.stringify(Object.fromEntries(formData.entries()));

        //     // Send the JSON data to the endpoint via an AJAX request
        //     fetch('/savecreds', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json'
        //         },
        //         body: jsonData
        //     })
        //         .then(response => {
        //             if (response.ok) {
        //                 // Handle the successful response
        //                 console.log('Data submitted successfully!');
        //             } else {
        //                 // Handle the failed response
        //                 alert("Fields cannot be empty!");
        //                 console.error('Failed to submit data.');
        //             }
        //         })
        //         .catch(error => {
        //             // Handle the error
        //             console.error(error);
        //         });
        // });

        const button = document.getElementById('redirect-button');
        button.addEventListener('click', () => {
            fetch('http://localhost:5000/generatepassword')
                .then(response => console.log(response.json()))
                .then(data => console.log(data))
                .catch(error => console.error(error));
        });

    </script>
</body>

</html>